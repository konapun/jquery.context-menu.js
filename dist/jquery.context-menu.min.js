!function(n){function e(e,c){if(i=e,t=this,s=n.extend({container:null,closeClass:"menu-close"},c),s.container){var u=s.container;n(u).on("click",function(n){t.showMenu(o(i,n))})}s.closeClass&&i.find("."+s.closeClass).on("click",function(){t.hideMenu()})}function o(n,e){var o=n.parent(),t=o.offset(),i=e.pageX-t.left,c=e.pageY-t.top+o.scrollTop(),s=o.width()-20,u=n.width();return i+u>s&&(i=s-u),{x:i,y:c}}var t,i,c=!1,s={};e.prototype.showMenu=function(n){var e,t;if(void 0!==n.pageX){var s=n;n=o(i,s),e=n.x,t=n.y}else e=n.x,t=n.y;i.css({visibility:"visible",top:t,left:e}),i.show(),c=!0},e.prototype.hideMenu=function(){i.hide(),c=!1},e.prototype.toggle=function(){c?t.hideMenu():t.showMenu()},n.fn.contextMenu=function(n){return new e(this,n)}}(jQuery);